/*
 * This file was generated by the Gradle 'init' task.
 */
plugins {
    id 'com.github.johnrengelman.shadow' version '7.1.2'
    id 'java'
    id 'maven-publish'
    id 'kr.entree.spigradle' version '2.4.2'
}

java {
    withSourcesJar()
    withJavadocJar()
}

repositories {
    codemc()
    protocolLib()
    spigotmc()

    maven {
        url = uri('https://libraries.minecraft.net/')
    }
    maven {
        url = uri('https://git.linwood.dev/api/packages/Minecraft/maven')
    }
    mavenCentral()
}

dependencies {
    implementation 'me.lucko:commodore:1.13'
    shadow group: 'de.tr7zw', name: 'item-nbt-api', version: '2.9.2'
    implementation 'org.bstats:bstats-bukkit:3.0.0'
    shadow 'commons-io:commons-io:2.11.0'
    shadow 'dev.linwood:ui-templates:3.2.1'
    shadow 'dev.linwood:serializer:3.2.1'
    shadow 'dev.linwood:ui:3.2.1'
    shadow 'dev.linwood:config:3.2.1'
    shadow 'dev.linwood:command:3.2.1'
    shadow 'dev.linwood:server:3.2.1'
    shadow 'dev.linwood:translations:3.2.1'
    shadow 'dev.linwood:request:3.2.1'
    shadow 'dev.linwood:item:3.2.1'
    shadow 'dev.linwood:utils:3.2.1'
    implementation 'com.google.code.gson:gson:2.9.0'
    implementation 'org.jetbrains:annotations:23.0.0'
    compileOnly spigot('1.19')
    compileOnly 'me.HSGamer:BetterGUI:6.6'
    compileOnly protocolLib('4.8.0')
}

shadowJar {
    configurations = [project.configurations.runtimeClasspath, project.configurations.shadow]
    relocate('de.tr7zw.changeme', 'dev.linwood.itemmods.shadow')
    relocate('dev.linwood.*', 'dev.linwood.itemmods.shadow')
    relocate('me.lucko.commodore', 'dev.linwood.itemmods.shadow.commodore')
    relocate('org.bstats', 'dev.linwood.itemmods.shadow.bstats')
}

group = 'dev.linwood'
version = '2.0.0-alpha.3-SNAPSHOT'
description = 'ItemMods'
java.sourceCompatibility = JavaVersion.VERSION_11

publishing {
    publications {
        maven(MavenPublication) {
            pom {
                name = "ItemMods"
                description = "Add custom items/custom blocks to your game"
                url = "itemmods.linwood.dev"
                from components.java
                versionMapping {
                    usage('java-api') {
                        fromResolutionOf('runtimeClasspath')
                    }
                    usage('java-runtime') {
                        fromResolutionResult()
                    }
                }
                licenses {
                    license {
                        name = "GNU General Public License v3.0"
                        url = "https://www.gnu.org/licenses/gpl-3.0.en.html"
                    }
                }
                developers {
                    developer {
                        id = "codedoctorde"
                        name = "CodeDoctorDE"
                        url = "https://github.com/CodeDoctorDE"
                    }
                }
                scm {
                    connection = "scm:git:git://github.com/CodeDoctorDE/ItemMods.git"
                    developerConnection = "scm:git:ssh://github.com/CodeDoctorDE/ItemMods.git"
                    url = "https://github.com/CodeDoctorDE/ItemMods"
                }
            }
        }
    }
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}
spigot {
    softDepends 'BetterGUI'
    apiVersion "1.18"
    load STARTUP
    softDepends 'ProtocolLib'
    commands {
        itemmods {
            aliases "itemmods", "itemmod", "itemm", "imods", "imod", "im", "ims"
            usage "\u00a74Usage: \u00a73/itemmods\u00a74!"
        }
        giveitem {
            aliases "givecustomitem", "giveitemmodsitem", "giveitemmoditem", "giveimitem", "giveitemmitem", "giveimoditem", "giveimodsitem", "givemoditem"
            usage "\u00a74Usage: \u00a73/givecustomitem <Player> <Item> [<Amount>]\u00a74!"
        }
    }

}